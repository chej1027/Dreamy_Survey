<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>수면 맞춤 잠옷 패턴 'Dreamy'</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif; 
      background: url('https://i.imgur.com/1OpiwKZ.jpeg') no-repeat center center/cover;
      color: white;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
 #menu {
      position: absolute;
      top: 10px;
      right: 20px;
      z-index: 10;
      display: flex;
      gap: 20px;
      font-size: 20px;
      color: white;
      font-family: 'Playfair Display', serif;
    }
    #menu a {
      text-decoration: none;
      color: white;
      font-weight: bold;
      transition: opacity 0.3s;
    }
    #menu a:hover {
      opacity: 0.7;
    }
    h1 {
      font-family: 'Playfair Display', serif; 
      font-size: 3rem;
      font-weight: bold;
      text-align: center;
      margin-top: 100px;
      margin-bottom: 100px; 
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
    }
    .survey-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      max-width: 800px;
      width: 100%;
    }
    .question-box {
      background: linear-gradient(to bottom, #45688e, #7a9abf); 
      border-radius: 15px;
      padding: 20px;
      width: 300px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      text-align: center;
    }
    .question-box h2 {
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    .option-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .option-group label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: white;
      color: black;
      padding: 10px 15px;
      border-radius: 10px;
      font-size: 1rem;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .option-group input[type="radio"] {
      accent-color: navy;
      transform: scale(1.2);
    }
    .option-group label:hover {
      background: #f0f0f0;
    }
    .result-button {
      margin-top: 30px;
      padding: 10px 20px;
      background: #7a9abf;
      color: white;
      font-size: 1.2rem;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
      transition: background 0.3s ease;
    }
    .result-button:hover {
      background: #45688e;
    }
    .display-container {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-top: 30px;
      margin-bottom: 50px;
    }
    .score-box {
      background: #7a9abf;
      color: white;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 10px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
      padding: 20px;
      width: 300px;
      text-align: center;
      white-space: pre-line; 
    }
    .small-tip {
      font-size:0.9rem;
      font-weight:normal;
      display:block;
      margin-top:10px;
      line-height:1.4;
    }
    canvas {
      border:2px solid white;
      background-color:white;
    }
  </style>
</head>
<body>
  
  <div id="menu">
    <a href="#main">main</a>
    <a href="#survey">survey</a>
    <a href="#mockup">mockup</a>
  </div>

  <h1>SURVEY</h1>

 <div class="survey-container">
  <div class="question-box">
    <h2>1. 하루 평균 수면 시간은 몇 시간인가요? </h2>
    <div class="option-group">
      <label>4시간 이하 <input type="radio" name="sleepTime" value="5"></label>
      <label>5~8시간 <input type="radio" name="sleepTime" value="15"></label>
      <label>9시간 이상 <input type="radio" name="sleepTime" value="25"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>2. 주로 어떤 자세로 잠을 주무시나요?</h2>
    <div class="option-group">
      <label>똑바로 누워서<input type="radio" name="pattern" value="solid"></label>
      <label>옆으로 누워서<input type="radio" name="pattern" value="stripe"></label>
      <label>엎드려서<input type="radio" name="pattern" value="check"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>3. 수면 중 꿈을 자주 꾸나요?</h2>
    <div class="option-group">
      <label>자주 꾼다<input type="radio" name="vividness" value="dynamic"></label>
      <label>가끔 꾼다<input type="radio" name="vividness" value="calm"></label>
      <label>거의 꾸지 않는다<input type="radio" name="vividness" value="simple"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>4. 수면 전 가장 자주 느끼는 감정은 무엇인가요?</h2>
    <div class="option-group">
      <label>평온함<input type="radio" name="color" value="brown"></label>
      <label>긴장감<input type="radio" name="color" value="pink"></label>
      <label>설렘<input type="radio" name="color" value="yello"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>5. 수면 후 가장 바라는 기분은 어떤가요?</h2>
    <div class="option-group">
      <label>차분함<input type="radio" name="tone" value="dark"></label>
      <label>행복감<input type="radio" name="tone" value="pastel"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>6. 아침 기상 난이도는 어떤가요?</h2>
    <div class="option-group">
      <label>쉬움<input type="radio" name="morning" value="5"></label>
      <label>보통<input type="radio" name="morning" value="15"></label>
      <label>어려움<input type="radio" name="morning" value="25"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>7. 아침에 몇번의 알람을 듣고 일어시나요?</h2>
    <div class="option-group">
      <label>1번<input type="radio" name="alarm" value="25"></label>
      <label>2~3번<input type="radio" name="alarm" value="15"></label>
      <label>4번 이상<input type="radio" name="alarm" value="5"></label>
    </div>
  </div>

  <div class="question-box">
    <h2>8. 주말과 평일의 수면 패턴 차이는 얼마나 되나요?</h2>
    <div class="option-group">
      <label>거의 없음<input type="radio" name="patternDiff" value="25"></label>
      <label>1~2시간<input type="radio" name="patternDiff" value="15"></label>
      <label>3시간 이상<input type="radio" name="patternDiff" value="5"></label>
    </div>
  </div>
</div>

<button class="result-button" id="final-result">결과 확인하기</button>

<div class="display-container">
  <div class="score-box" id="scoreBox">Q.당신의 수면 점수는 ?</div>
  <canvas id="patternCanvas" width="500" height="500"></canvas>
</div>

<script>
  document.getElementById('final-result').addEventListener('click', function () {
    const pattern = document.querySelector('input[name="pattern"]:checked')?.value;
    const vividness = document.querySelector('input[name="vividness"]:checked')?.value;
    const color = document.querySelector('input[name="color"]:checked')?.value;
    const tone = document.querySelector('input[name="tone"]:checked')?.value;
    const sleepTime = parseInt(document.querySelector('input[name="sleepTime"]:checked')?.value || 0);
    const morning = parseInt(document.querySelector('input[name="morning"]:checked')?.value || 0);
    const alarm = parseInt(document.querySelector('input[name="alarm"]:checked')?.value || 0);
    const patternDiff = parseInt(document.querySelector('input[name="patternDiff"]:checked')?.value || 0);

    if (!pattern || !vividness || !color || !tone || !sleepTime || !morning || !alarm || !patternDiff) {
      alert('1~8번 질문에 모두 답해주세요!');
      return;
    }

    // 사용자가 제공한 코드 참고
    function getAdjustedColor(baseColor, tone) {
      const colorMap = {
        brown: { dark: '#714C31', pastel: '#BFA17F' },
        pink: { dark: '#EA7D9C', pastel: '#F6D7E6' },
        yello: { dark: '#87CEEB', pastel: '#B3E5FC' }
      };
      const selectedColor = colorMap[baseColor] || { dark: '#666', pastel: '#EEE' };
      return {
        bgColor: selectedColor[tone === 'dark' ? 'dark' : 'pastel'],
        patternColor: tone === 'dark' ? '#666' : '#EEE'
      };
    }

    function getSleepTimeColor(sleepTime, tone) {
      const colorMap = {
        blue: { dark: '#0B85CE', pastel: '#9CC3EE' },
        ivory: { dark: '#F4E4C3', pastel: '#FDEDD4' },
        white: { dark: '#FFFFFF', pastel: '#FFFFFF' }
      };
      const selectedColor = colorMap[sleepTime] || { dark: '#666', pastel: '#EEE' };
      return selectedColor[tone === 'dark' ? 'dark' : 'pastel'];
    }

    let shapeKey;
    if(sleepTime===5) shapeKey='blue'; 
    else if(sleepTime===15) shapeKey='ivory';
    else if(sleepTime===25) shapeKey='white';

    let spacing=0;
    if(vividness==='dynamic') spacing=15; 
    else if(vividness==='calm') spacing=30; 
    else if(vividness==='simple') spacing=50;

    // 배경색/패턴색 결정
    const { bgColor, patternColor } = getAdjustedColor(color, tone);
    const shapeColor = getSleepTimeColor(shapeKey, tone);

    const canvas = document.getElementById('patternCanvas');
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle=bgColor;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    if(pattern==='solid'){
      for(let x=0;x<=canvas.width;x+=spacing){
        for(let y=0;y<=canvas.height;y+=spacing){
          ctx.beginPath();
          ctx.arc(x,y,10,0,Math.PI*2);
          ctx.fillStyle=shapeColor;
          ctx.fill();
        }
      }
    } else if(pattern==='stripe'){
      ctx.strokeStyle=shapeColor;
      ctx.lineWidth=2;
      for(let x=0;x<=canvas.width;x+=spacing){
        ctx.beginPath();
        ctx.moveTo(x,0);
        ctx.lineTo(x,canvas.height);
        ctx.stroke();
      }
    } else if(pattern==='check'){
      ctx.strokeStyle=shapeColor;
      ctx.lineWidth=2;
      for(let x=0;x<=canvas.width;x+=spacing){
        ctx.beginPath();
        ctx.moveTo(x,0);
        ctx.lineTo(x,canvas.height);
        ctx.stroke();
      }
      for(let y=0;y<=canvas.height;y+=spacing){
        ctx.beginPath();
        ctx.moveTo(0,y);
        ctx.lineTo(canvas.width,y);
        ctx.stroke();
      }
    }

    const totalScore = sleepTime + morning + alarm + patternDiff;
    let tip = '';
    if (totalScore === 20) {
      tip = '규칙적인 수면시간을 가져보세요. 스케줄을 일정하게 유지해보는 것은 어떨까요?';
    } else if (totalScore === 30) {
      tip = '수면시간을 조금 더 늘려보세요. 자기 전 밝은 빛을 줄이는 것도 도움이 됩니다.';
    } else if (totalScore === 40) {
      tip = '가벼운 스트레칭이나 명상으로 수면 환경을 개선해보세요.';
    } else if (totalScore === 50) {
      tip = '수면환경을 더 편안하게 만들어보세요. 조용하고 어두운 환경 조성이 중요합니다.';
    } else if (totalScore === 60) {
      tip = '자기 전 스마트폰 사용을 줄여보세요. 화면에서 나오는 빛이 수면에 영향을 줄 수 있어요.';
    } else if (totalScore === 70) {
      tip = '카페인 섭취를 줄여보세요. 오후 시간대부터는 디카페인 음료를 시도해보는 것은 어떨까요?';
    } else if (totalScore === 80) {
      tip = '적당한 운동을 해보세요. 가벼운 산책이나 요가가 수면에 도움이 될 수 있어요.';
    } else if (totalScore === 90) {
      tip = '자기 전 따뜻한 차 한 잔을 마셔보세요. 몸과 마음을 편안하게 만들어줍니다.';
    } else if (totalScore === 100) {
      tip = '이미 좋은 수면 습관을 가지고 있군요! 더 좋은 수면을 위해 자기 전 몸을 따뜻하게 유지해보세요.';
    }

    document.getElementById('scoreBox').innerHTML = `당신의 수면 점수는 ${totalScore}점 입니다.` + 
      (tip ? `<br><span class="small-tip">${tip}</span>` : '');
  });
</script>
</body>
</html>
